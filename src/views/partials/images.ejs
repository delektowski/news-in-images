<button onclick="handleAddDailyNewsImages()">ADD</button>
<div class="images-container">
    <% if(imgList){ %>
        <% imgList.forEach(function(img){ %>
            <a href="<%= img.link %>" target=”_blank”>
                <div class="image-container">
                    <img class="image-painting" src="<%= img.imgSrc %>" alt="ai generated image">
                    <p class="img-title"><%= img.title %></p>
                    <div class="news-src"><span class="fi fi-<%= img.country %>"></span>
                        <p><%= img.newsProvider %></p></div>
                </div>
            </a>
        <% }); %>
    <% } %>
</div>

<script>
    let daysBefore = 0;
    function handleAddDailyNewsImages() {
        daysBefore++
        const body = {daysBefore}
        fetch("http://localhost:5555/test", {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(body)
        }).then(res => res.json()).then(response => {
            addDailyNewsImages(response)
        }).catch(err => {
            console.log("Error: ", err)
        })
    }

    function addDailyNewsImages(imagesData) {
        let fragment = new DocumentFragment();
        const mainContainer = document.querySelector('.main-container')
        const imagesContainer = document.createElement('div')
        imagesContainer.classList.add("images-container")

        const setImage = (imageData) => {
            const anchorTag = document.createElement('a')
            const imageContainer = document.createElement('div')
            const image = document.createElement('img')
            const imageTitle = document.createElement('p')
            const newsSrcContainer = document.createElement('div')
            const newsSrcText = document.createElement('p')
            const newsSrcFlag = document.createElement('span')
            anchorTag.href = imageData.link
            anchorTag.target = "_blank"
            imageContainer.classList.add("image-container")
            image.src = imageData.imgSrc
            image.alt = "ai generated image"
            image.classList.add("image-painting")
            imageTitle.innerText = imageData.title
            imageTitle.classList.add('img-title')
            newsSrcContainer.classList.add('news-src')
            newsSrcFlag.classList.add('fi', `fi-${imageData.country}`)
            newsSrcText.innerText = imageData.newsProvider
            newsSrcContainer.append(newsSrcFlag)
            newsSrcContainer.append(newsSrcText)
            imageContainer.append(image)
            imageContainer.append(imageTitle)
            imageContainer.append(newsSrcContainer)
            anchorTag.append(imageContainer)

            return anchorTag
        }
        imagesData.forEach(imageData => {
            imagesContainer.append(setImage(imageData))
        })
        fragment.append(imagesContainer)
        mainContainer.appendChild(fragment)
    }
</script>





